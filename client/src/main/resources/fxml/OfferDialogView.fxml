<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DialogPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>

<DialogPane maxHeight="640.0" maxWidth="800.0" minHeight="640.0" minWidth="800.0" prefHeight="640.0" prefWidth="800.0" styleClass="offer-dialog" stylesheets="@../css/styles.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.uninaswap.client.controller.OfferDialogController">
   
   <content>
      <ScrollPane maxHeight="618.0" maxWidth="800.0" minHeight="618.0" minWidth="800.0" prefHeight="618.0" prefWidth="800.0">
         <content>
            <VBox minWidth="764.0" spacing="20.0" styleClass="offer-content">
               <padding>
                  <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
               </padding>
               
               <!-- Listing Information -->
               <VBox spacing="10.0" styleClass="listing-info-section">
                  <children>
                     <Text fx:id="offerForLabel" styleClass="section-title" text="%offerdialog.label.offer.for" />
                     <HBox alignment="CENTER_LEFT" spacing="15.0">
                        <children>
                           <ImageView fx:id="listingImage" fitHeight="60.0" fitWidth="60.0" preserveRatio="true" styleClass="listing-thumbnail" />
                           <VBox spacing="3.0">
                              <children>
                                 <Text fx:id="listingTitle" styleClass="listing-title" text="Listing Title" />
                                 <Text fx:id="listingPrice" styleClass="listing-price" text="â‚¬ 25.00" />
                              </children>
                           </VBox>
                        </children>
                     </HBox>
                  </children>
               </VBox>
               
               <Separator />
               
               <!-- Money Offer Section -->
               <VBox fx:id="moneyOfferSection" spacing="15.0" styleClass="money-offer-section" VBox.vgrow="NEVER">
                  <children>
                     <CheckBox fx:id="includeMoneyCheckBox" styleClass="section-checkbox" text="%offerdialog.checkbox.include.money" />
                     
                     <VBox fx:id="moneyInputSection" spacing="10.0" visible="false">
                        <children>
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <children>
                                 <Label fx:id="amountLabel" text="%offerdialog.label.amount" />
                                 <TextField fx:id="moneyAmountField" prefWidth="150.0" promptText="%offerdialog.prompt.amount" />
                                 <ComboBox fx:id="currencyComboBox" prefWidth="80.0" />
                              </children>
                           </HBox>
                           <Label fx:id="priceConstraintLabel" styleClass="constraint-label" text="%offerdialog.constraint.sell.price" />
                        </children>
                     </VBox>
                  </children>
               </VBox>
               
               <!-- Items Offer Section (Trade Listings Only) -->
               <VBox fx:id="itemsOfferSection" spacing="15.0" styleClass="items-offer-section" visible="false" VBox.vgrow="ALWAYS">
                  <children>
                     <Text fx:id="itemsOfferSectionTitle" styleClass="section-title" text="%offerdialog.section.items.title" />
                     
                     <!-- Available Items Table -->
                     <VBox spacing="10.0">
                        <children>
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <children>
                                 <Label fx:id="selectItemsLabel" text="%offerdialog.label.select.items" />
                                 <Region HBox.hgrow="ALWAYS" />
                                 <Button fx:id="addNewItemButton" onAction="#handleAddNewItem" styleClass="add-item-button" text="%offerdialog.button.add.new.item" />
                              </children>
                           </HBox>
                           
                           <TableView fx:id="availableItemsTable" prefHeight="200.0" styleClass="compact">
                              <columns>
                                 <TableColumn fx:id="itemNameColumn" minWidth="120.0" prefWidth="180.0" text="%offerdialog.column.name" />
                                 <TableColumn fx:id="itemConditionColumn" minWidth="80.0" prefWidth="120.0" text="%offerdialog.column.condition" />
                                 <TableColumn fx:id="itemAvailableColumn" minWidth="70.0" prefWidth="100.0" text="%offerdialog.column.available" />
                                 <TableColumn fx:id="itemQuantityColumn" minWidth="70.0" prefWidth="100.0" text="%offerdialog.column.quantity" />
                                 <TableColumn fx:id="itemActionColumn" minWidth="80.0" prefWidth="120.0" text="%offerdialog.column.action" />
                              </columns>
                              <columnResizePolicy>
                                 <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                              </columnResizePolicy>
                              <placeholder>
                                 <Label text="%offerdialog.placeholder.no.items" />
                              </placeholder>
                           </TableView>
                        </children>
                     </VBox>
                     
                     <Separator />
                     
                     <!-- Selected Items for Offer -->
                     <VBox spacing="10.0">
                        <children>
                           <Text fx:id="selectedItemsSubtitle" styleClass="subsection-title" text="%offerdialog.subtitle.selected.items" />
                           <TableView fx:id="selectedItemsTable" prefHeight="150.0" styleClass="compact">
                              <columns>
                                 <TableColumn fx:id="selectedNameColumn" minWidth="120.0" prefWidth="200.0" text="%offerdialog.column.name" />
                                 <TableColumn fx:id="selectedConditionColumn" minWidth="80.0" prefWidth="140.0" text="%offerdialog.column.condition" />
                                 <TableColumn fx:id="selectedQuantityColumn" minWidth="70.0" prefWidth="100.0" text="%offerdialog.column.quantity" />
                                 <TableColumn fx:id="selectedRemoveColumn" minWidth="80.0" prefWidth="100.0" text="%offerdialog.column.remove" />
                              </columns>
                              <columnResizePolicy>
                                 <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                              </columnResizePolicy>
                              <placeholder>
                                 <Label text="%offerdialog.placeholder.no.selected" />
                              </placeholder>
                           </TableView>
                        </children>
                     </VBox>
                  </children>
               </VBox>
               
               <!-- Message Section -->
               <VBox spacing="10.0" styleClass="message-section">
                  <children>
                     <Label fx:id="messageLabel" text="%offerdialog.label.message" />
                     <TextArea fx:id="messageArea" prefRowCount="3" promptText="%offerdialog.prompt.message" wrapText="true" />
                  </children>
               </VBox>
               
               <!-- Offer Summary -->
               <VBox spacing="10.0" styleClass="offer-summary">
                  <children>
                     <Text fx:id="offerSummaryTitle" styleClass="section-title" text="%offerdialog.title.summary" />
                     <VBox fx:id="offerSummaryContent" spacing="5.0" styleClass="summary-content" />
                  </children>
               </VBox>
            </VBox>
         </content>
      </ScrollPane>
   </content>
</DialogPane>
